<head>
  <% include ./partials/head %>
</head>

<body>
  <header>
    <% include ./partials/header %>
  </header>

  <body ng-app="friendApp">

    <div ng-controller="MainCtrl">
    <button ng-click = "show_form = !show_form" ng-hide="show_form == true">Post about a show you're attending!</button>
    <div ng-show="show_form">
    <form ng-submit="addPost()">
      Artist: <input type="text" ng-model="artist" value="artist"></input><br/>
      City/State: <input type="text" ng-model="location" value="location"></input><br/>
      Date of the Show:<input type="date" ng-model="show_date" value="show_date"></input>
      Your Message:<input type="text" ng-model="body" value="body"></input>
      <button type="submit" ng-click="show_form = false">Submit!</button>
      <button type="button" ng-click="show_form = false">Nevermind</button>
    </form>
    </div>

    <div ng-repeat="post in posts track by $index | orderBy: '-attendees'" ng-controller="MainCtrl">
      Attending: {{post.attendees}}
      {{post.artist}}<br/>
      {{post.location}}<br/>
      {{post.show_date}}<br/>
      {{post.body}}
      <br/>
      <div ng-hide="going == true">
      <button type="button" ng-click="incrementAttendance(post)">I'm going!</span>
      </div>
      <div ng-repeat="comment in post.comments | orderBy: '-created_at'">
        {{comment.body}}<br/>
      </div>
        <button type="button" ng-click = "comments_form = !comments_form" ng-hide="comments_form == true">Let them know you're going!</button>
        <br/>
        <form ng-submit="addComment()" ng-show="comments_form == true">
          <input type="text" class="form-control" placeholder="Comment" ng-model="body">
          <br/>
          <button type="submit" class="btn btn-primary" ng-click="comments_form = false">Post</button>
          <button type="button" class="btn btn-primary" ng-click="comments_form = false">Cancel</button>
        </form>
      </div>


        </div>
    </div>

    <footer>
      <% include ./partials/footer %>
    </footer>
  </body>
</html>
